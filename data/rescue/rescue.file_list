d bin dev etc home lib mnt proc sys sbin tmp var
d media/{cdrom,floppy}
c 1777 0 0 tmp

devs:
  /dev

fillup:
  /bin

filesystem:
  /etc/{ppp,rc.d,uucp}
  /etc/sysconfig
  /root
  /etc/init.d
  /usr/tmp
  /var
r /var/{spool,squid,lib/YaST}

sysconfig:
  /etc
  /sbin
  /var
  /lib*/libgetconfig.so*

iproute2:
  /sbin/ip

insserv:
  /etc
  /sbin

aaa_base: prein,postin
e prein
  /etc
r /etc/{csh*,default*,mailcap,mime.types,permissions*}
r /etc/{rc.d.README,runlevel.fallback,zshrc,cron.daily}
  /sbin
  /root
r /etc/init.d/rc?.d/*kerneld
r /etc/init.d/rc?.d/*cron
r /etc/init.d/rc?.d/*pcnfsd
r /etc/init.d/rc?.d/*routed
r /etc/init.d/rc?.d/*nfs
r /etc/init.d/rc?.d/*xdm
  /usr/bin
r /usr/bin/ChangeSymlinks
  /lib/YaST/SuSEconfig.functions
  /var/adm/fillup-templates
x etc/init.d/boot.rootfsck /etc/init.d/boot.rootfsck
e postin
e insserv etc/init.d/boot.shm
e insserv etc/init.d/boot.rootfsck
# r /etc/init.d/{README,boot.d/S10serial,cron,kerneld,nfs,pcnfsd,powerfail,routed,serial,skeleton,xdm}
t /etc/fstab

mkinitrd:
  /

grep:
  /bin

sed:
  /bin

tar:
  /bin

star:
  /etc
  /usr/{,s}bin

bash:
  /bin

readline:
  /lib*

cpio:
  /bin
  /usr/bin

cracklib:
  /usr/lib*

libxcrypt:
  /lib*

db:
  /usr/lib*/libdb-4.*

diffutils:
  /usr/bin

dump:
  /sbin/{dump,restore}

hdparm:
  /sbin

ntfsprogs:
  /usr/lib*/libntfs.so.*
  /usr/{,s}bin

e2fsprogs:
  /{lib*,sbin}
  /usr/{,s}bin

coreutils:
  /etc
  /bin
  /usr/bin

dosfstools:
  /sbin

findutils:
  /usr/bin/{find,xargs}

libacl:
  /lib*

popt:
  /usr/lib*/libpopt.so*

nscd:
  /etc/nscd.conf

tcpd:
  /lib*/libwrap.so*

libgcc:
  /lib*

glibc:
  /etc/ld.so.conf
  /{lib*,sbin}
r /lib/libdb.so.*
r /lib/lib{BrokenLocale.so.1,NoVersion.so.1,SegFault.so}
  /usr/{,s}bin
r /usr/bin/{db*,glibcbug,localedef,rpcgen}
  /usr/lib*/pt_chown

gpart:
  /usr/bin

if arch eq 'sparc' || arch eq 'sparc64'
  silo:
    /sbin/silo
endif

gzip:
  /bin
  /usr/bin

joe:
  /usr/bin/{joe,jmacs}
  /etc/{joerc,jmacsrc}

less:
  /etc
  /usr/bin
r /usr/bin/lesspipe.sh
t /usr/bin/lesspipe.sh
c 0755 0 0 /usr/bin/lesspipe.sh
r /usr/bin/lessopen.sh
t /usr/bin/lessopen.sh
c 0755 0 0 /usr/bin/lessopen.sh
r /usr/bin/lessclose.sh
t /usr/bin/lessclose.sh
c 0755 0 0 /usr/bin/lessclose.sh

zlib:
  /lib*/libz.so*

bzip2:
  /usr/bin
  /usr/lib*/libbz2.so*	

if arch eq 'ia32' || arch eq 'ppc'
  lilo:
    if arch eq 'ppc'
      /lib/lilo
      /bin
    endif
    /sbin
    if arch eq 'ia32'
      /usr/sbin
    endif
endif

if arch eq 'ppc'
  pdisk:
    /sbin/pdisk
  iprutils:
    /sbin
  ibmsis:
    /etc/microcode
    /sbin
  hotplug:
    /sbin/hotplug
    /etc/hotplug/firmware.agent
    /etc/hotplug/hotplug.functions
    /usr/lib/hotplug/firmware
  ncurses:
    /usr/lib/libpanel.so.*
    /usr/lib/libform.so.*
    /usr/lib/libmenu.so.*
  eject:
    /bin
endif

scsi:
  /bin
  /dev
  /usr/bin
  /usr/sbin

if arch eq 'ia32'
  grub:
    /usr/{bin,sbin,lib}
endif

if arch eq 'ia64'
  efibootmgr:
    /usr/sbin
endif

evms:
  /etc/evms.conf
  /lib*
  /sbin

evms-gui:
  /sbin/evmsn

glib:
  /opt/gnome/lib*/libglib-1.2.so*

lvm2: postin
  /etc
  /sbin
  /var
e postin

device-mapper: postin
  /dev
  /etc
  /lib*
  /sbin
e postin

raidtools: postin
  /etc
  /sbin
e postin

mktemp:
  /bin/mktemp

module-init-tools:
  /sbin/{insmod,modprobe,rmmod,depmod,ksyms}
  /sbin/{insmod,modprobe,rmmod,depmod}.old
  # don't ask...
  /bin/lsmod{,.old}

ncurses:
  /lib*/libncurses.so.5*
  /usr/lib*/libpanel.so.*
  /usr/share/terminfo
  /usr/bin/{clear,tset,reset}

terminfo:
  /usr/share/terminfo/i/ibm3151

net-tools:
  /{,s}bin
  /usr/sbin

netcat:
  /usr/bin

netcfg:
  /etc
r /etc/{diphosts,ftpusers,hosts.*}
e echo Rescue.local >etc/HOSTNAME

if 0
# conflicts with nfs-utils
nfs-server: postin
  /etc/init.d
  /usr/sbin/{rpc.*,showmount}
  /var/lib/nfs
e postin
endif

icmpinfo:
  /usr/sbin/icmpinfo

iputils:
  /bin/ping

telnet:
  /usr/bin/telnet

finger:
  /usr/bin/finger

rsh:
  /usr/bin

resmgr:
  /lib*/libresmgr.so.*

pam:
  /{etc,lib*,sbin}

pam-modules: postin
  /{etc,lib*,sbin}

  # don't use cracklib
  c 755 0 0 /etc/security
  R s/^(password:.*?)\s+use_cracklib\b/$1/ /etc/security/pam_pwcheck.conf

E postin

pciutils:
  /sbin

portmap: postin
  /etc
  /sbin
  /usr/sbin
e postin

procps:
  /bin/ps
  /usr/bin/{free,top,vmstat}

psmisc:
  m /bin/fuser /usr/bin
  /usr/bin/killall
  /usr/bin/pstree

procinfo:
  /usr/bin/socklist

reiserfs:
  /sbin

jfsutils:
  /sbin

xfsprogs:
  /lib*
  /usr/sbin
  /sbin

xfsdump:
  /usr/sbin
  /sbin

openslp:
  /etc
  /usr/bin
  /usr/lib*

libattr:
  /lib*

attr:
  /usr/bin

dmapi:
  /lib*

rpm:
  /bin
  /usr/bin
  /{usr,var}/lib/rpm
  /usr/lib*/librpm*.so
r /usr/lib/rpm/rpm{get,put}text
r /usr/bin/rpmqpack

rsync: postin
  /etc
  /usr/{,s}bin
e postin

setserial: postin
  /etc
  /bin/setserial
e postin

pwdutils:
  /{etc,bin}
  /usr/bin
  /usr/sbin/pwunconv

openldap2-client:
  /usr/lib*/liblber.so.*
  /usr/lib*/libldap.so.*

openssl:
  /usr/lib*/libcrypto.so.*
  /usr/lib*/libssl.so.*

cyrus-sasl:
  /usr/lib*/libsasl2.so.*

db:
  /usr/lib*/libdb-4*.so  

heimdal-lib:
  /etc
  /usr/lib*/libasn1.so.*
  /usr/lib*/libgssapi.so.*
  /usr/lib*/libkrb5.so.*
  /usr/lib*/libroken.so.*
  /usr/lib*/libkafs.so.*

strace:
  /usr/bin/strace

syslogd: postin
  /etc
  /sbin/{klogd,syslogd}
  /var/adm/fillup-templates/sysconfig.syslog
e postin

sysvinit: postin
n /dev/initctl
c 600 0 0 /dev/initctl
  /sbin
if arch ne 's390' && arch ne 's390x'
  /etc
endif
# r /sbin/{powerd,runlevel,setserialbits,start-stop-daemon,sulogin}
  /usr/bin
  /bin/usleep
e postin

util-linux: postin
  /etc
  /bin/{dmesg,mount,umount,guessfstype}
if arch ne 's390' && arch ne 's390x'
  /sbin/hwclock
endif
  /sbin/{blockdev,ctrlaltdel,elvtune,fdisk,losetup,mkfs,mkfs.bfs,mkswap,pivot_root,swapon,swapoff}
  /sbin/agetty
  /usr/{bin,sbin}
e postin

mingetty:
  /sbin

libselinux:
  /lib*/libselinux.so*

vim:
  /etc
  /bin/vi{,m}
  /usr/bin/vi{,m}

gdbm:
  /usr/lib*/libgdbm.so*

hwinfo:
  /usr/{sbin,lib*}

udev:
  /lib/klibc
  /etc
  /lib*/libsysfs.so*
  /usr/bin
  /sbin  

parted:
  /usr/lib*
  /usr/sbin

gawk:
  /bin

ddrescue:
  /bin

hex:
  /usr/bin/hex

mdadm:
  /sbin

openssh:
  /etc/ssh
  /usr/bin
  /usr/lib*

dhcpcd:
  /sbin
  /var

smartmontools:
  /etc
  /usr/sbin

multipath-tools: postin
  /etc
  /sbin
  /usr/bin
e postin

if arch ne 'sparc'
  <kernel_rpm>:
    f / st.ko
    if arch ne 'ppc'
    f / sg.ko
    f / reiserfs.ko
    if arch ne 'ia64'
      f / jfs.ko
    endif
    f / jbd.ko
    f / ext3.ko
    f / hpfs.ko
    f / xfs.ko
    f / xfs_quota.ko
    endif


    f / linear.ko
    f / multipath.ko
    f / raid0.ko
    f / raid1.ko
    f / raid5.ko
    f / raid6.ko
    f / xor.ko
    f / dm-crypt.ko
    f / dm-flakey.ko
    f / dm-mirror.ko
    f / dm-mod.ko
    f / dm-multipath.ko
    f / dm-snapshot.ko
    f / dm-zero.ko

if arch eq 'alpha'
    m /boot/System.map-* /System.map
else
    m /boot/System.map-* /System.map
endif 

  # run depmod
  E /sbin/depmod -a -F /System.map <kernel_ver>
  r /System.map /sbin/depmod
endif

  # serial console / mingetty setup for ppc mostly.
  x etc/init.d/boot.local /etc/init.d/boot.local

# enable sysrq
e perl -pi -e '\''s/^(ENABLE_SYSRQ=).*/$1"yes"/'\'' etc/sysconfig/sysctl

# now run SuSEconfig
E echo "/dev/root / ext2 defaults 0 0" >/etc/fstab
E echo "proc /proc proc defaults 0 0" >>/etc/fstab
E echo "sysfs /sys sysfs noauto 0 0" >>/etc/fstab
E echo "usbfs /proc/bus/usb usbfs defaults 0 0" >>/etc/fstab
E echo "devpts /dev/pts devpts mode=0620,gid=5 0 0" >>/etc/fstab
E /sbin/SuSEconfig --force --norestarts

r /var/adm/fillup-templates

